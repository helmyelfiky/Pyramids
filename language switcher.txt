const languageSwitcher = document.getElementById("languageSwitcher");

    // Function to load and apply language
    function loadLanguage(lang) {
        fetch(`/JS/${lang}.json`) // Load the selected language JSON
            .then(response => response.json())
            .then(translations => {
                document.querySelectorAll("[data-i18n]").forEach(el => {
                    const key = el.getAttribute("data-i18n");
                    if (translations[key]) {
                        el.textContent = translations[key]; // Update text
                    }
                });

                // If Arabic, switch page direction to RTL
                document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
            })
            .catch(error => console.error("Error loading language:", error));
    }

    // Detect language change
    languageSwitcher.addEventListener("change", function () {
        localStorage.setItem("selectedLang", this.value); // Save selection
        loadLanguage(this.value);
    });

    // Load saved language on page load
    const savedLang = localStorage.getItem("selectedLang") || "en";
    languageSwitcher.value = savedLang;
    loadLanguage(savedLang);